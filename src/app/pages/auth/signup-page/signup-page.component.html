<app-auth-page-header></app-auth-page-header>

<mdb-card class="auth-card my-3 my-md-5">
  <mdb-card-header class="primary-color white-text text-center py-3">
    <h5>会員登録</h5>
  </mdb-card-header>

  <mdb-card-body class="px-lg-5 pt-3 pt-lg-4 pb-5">

    <!-- サインアップエラーメッセージ -->
    <ng-container *ngIf="signUpErrorMessage">
      <p class="error mb-5">{{signUpErrorMessage}}</p>
    </ng-container>
    <!-- Form -->
    <form class="text-center" [formGroup]="form" (ngSubmit)="signUp()">
      <!-- name -->
      <div class="md-form">
        <input
          type="text"
          id="displayName"
          class="form-control"
          formControlName="displayName"
          mdbInput
          mdbValidate
        >
        <label for="displayName">表示名</label>
        <mdb-error *ngIf="displayNameInput.invalid && (displayNameInput.dirty || displayNameInput.touched)">
          <span *ngIf="displayNameInput.errors.required">表示名は入力必須です</span>
        </mdb-error>
        <mdb-success *ngIf="displayNameInput.valid && (displayNameInput.dirty || displayNameInput.touched)"></mdb-success>
        <small id="displayNameHelpBlock" class="form-text text-muted mb-4">
          あとで変えることができます
        </small>
      </div>
      <!-- E-mail -->
      <div class="md-form">
        <input
          type="email"
          id="email"
          class="form-control"
          formControlName="email"
          mdbInput
          mdbValidate
        >
        <label for="email">メールアドレス</label>
        <mdb-error *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
          <span *ngIf="emailInput.errors.required">メールアドレスは入力必須です</span>
          <span *ngIf="emailInput.errors.email">不正なメールアドレスです</span>
        </mdb-error>
        <mdb-success *ngIf="emailInput.valid && (emailInput.dirty || emailInput.touched)"></mdb-success>
      </div>
      <!-- Password -->
      <div class="md-form">
        <input
          type="password"
          id="password"
          class="form-control"
          formControlName="password"
          mdbInput
          mdbValidate
        >
        <label for="password">パスワード</label>
        <mdb-error *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)">
          <span *ngIf="passwordInput.errors.required">パスワードは入力必須です</span>
        </mdb-error>
        <mdb-success *ngIf="passwordInput.valid && (passwordInput.dirty || passwordInput.touched)"></mdb-success>
      </div>
      <!-- PasswordConfirm -->
      <div class="md-form">
        <input
          type="password"
          id="passwordConfirm"
          class="form-control"
          formControlName="passwordConfirm"
          mdbInput
          mdbValidate
        >
        <label for="passwordConfirm">パスワード（確認）</label>
        <mdb-error *ngIf="passwordConfirmInput.invalid && (passwordConfirmInput.dirty || passwordConfirmInput.touched)">
          <span *ngIf="passwordConfirmInput.errors.required">パスワード(確認)は入力必須です</span>
        </mdb-error>
        <mdb-success *ngIf="passwordConfirmInput.valid && (passwordConfirmInput.dirty || passwordConfirmInput.touched)"></mdb-success>
        <small id="passwordHelpBlockConfirm" class="form-text text-muted mb-4">
          At least 8 characters and 1 digit
        </small>
      </div>

      <div class="d-flex justify-content-center">
        <mdb-checkbox formControlName="termsAccept"></mdb-checkbox>
        <div><a (click)="openMembershipAgreementModal()" routerLink="#">利用規約</a>に同意します</div>
      </div>


      <!-- Sign up button -->
      <button
        mdbBtn
        color="primary"
        block="true"
        class="mt-5 mb-4 waves-effect z-depth-0"
        mdbWavesEffect
        type="submit"
        [disabled]="form.invalid"
      >会員登録</button>
      <div class="d-flex justify-content-around">
        <div>
          <a routerLink="/login">ログイン</a></div>
        <div>
          <!-- Forgot password -->
          <a routerLink="/reset-password">パスワードを忘れましたか?</a>
        </div>
      </div>
    </form>
  </mdb-card-body>
</mdb-card>
